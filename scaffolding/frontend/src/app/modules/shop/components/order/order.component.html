<div *ngIf="loggedIn">
    <h1 class = "headline">Your Order</h1>
    <mat-card>
        <mat-label>
            <mat-card-title>Summary of your order</mat-card-title>
        </mat-label>
        <div *ngFor="let product of products">
            <p>Product: {{product.product.title}}, {{product.quantity}}x</p>
        </div>
    </mat-card>
    <div *ngIf="!addressExists"><p>Please fill in your address and pick a payment method below to submit your order.</p></div>
    <div *ngIf="addressExists"><p>Please pick a payment method to submit your order.</p></div>

    <div *ngIf="!addressExists">
        <p>You don't seem to have filled in your complete address yet, please give us an address to send the order to.
        If you always want your orders to be sent to the same address you can link it by filling it in in your Profile page.</p>
        <mat-form-field appearance="fill">
            <mat-label>Street</mat-label>
            <input matInput placeholder="Street" [(ngModel)]="newStreet">
        </mat-form-field>

        <mat-form-field appearance="fill">
            <mat-label>House Number</mat-label>
            <input matInput type="number"  min="1" placeholder="House Number" [(ngModel)]="newHouseNr">
        </mat-form-field>

        <mat-form-field appearance="fill">
            <mat-label>City</mat-label>
            <input matInput placeholder="City" [(ngModel)]="newCity">
        </mat-form-field>

        <mat-form-field appearance="fill">
            <mat-label>ZipCode</mat-label>
            <input matInput placeholder="ZipCode" [(ngModel)]="newZipCode">
        </mat-form-field>

        <mat-form-field appearance="fill">
            <mat-label>Paymentmethod</mat-label>
            <mat-select [(value)]="paymentMethod">
                <mat-option value="Invoice" selected>Invoice</mat-option>
                <mat-option value="CreditCard">Credit Card</mat-option>
                <mat-option value="Twint">Twint</mat-option>
                <mat-option value="PayPal">PayPal</mat-option>
            </mat-select>
        </mat-form-field>
    </div>

    <div *ngIf="addressExists">
        <p>Since you have filled in your address in your profile details already we will use that address.</p>
        <mat-form-field appearance="fill">
            <mat-label>Paymentmethod</mat-label>
            <mat-select [(value)]="paymentMethod">
                <mat-option value="Invoice" selected>Invoice</mat-option>
                <mat-option value="CreditCard">Credit Card</mat-option>
                <mat-option value="Twint">Twint</mat-option>
                <mat-option value="PayPal">PayPal</mat-option>
            </mat-select>
        </mat-form-field>
    </div>

    <button mat-stroked-button (click)="submitOrder()"> Submit Order </button>
    <div *ngIf="wasOrderSubmitted">Your order has been successfully submitted.</div>

</div>

<div *ngIf="!loggedIn">
    <h1 class = "headline">To purchase an order please log in first.</h1>
</div>
